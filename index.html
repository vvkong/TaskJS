<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
    <style>
        .palette {
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .palette li {
            width: 40px;
            height: 40px;
            border: 1px solid #000;
            cursor: pointer;
        }
        #erik {
            width: 480px;
            height: 480px;
            background: darkgoldenrod;
            background-image: url('images/erik_ce204002.jpg');
            background-repeat: no-repeat;
            background-origin: 0 0;
            background-position: 0 0;
        }
    </style>
</head>
<body> 
    <section>
        <div id="erik">
        </div>
        <script>
            function showEricFace() {
                let cnt = 0;
                let eric = document.getElementById('erik');
                return function() {
                    cnt = cnt % 17;
                    eric.style.backgroundPosition = `0px -${(cnt * 480) + 'px'}`;
                    cnt++;
                }
            }
            setInterval(showEricFace(), 100)
        </script>
    </section>           
    <ul class="palette">
        <li style="background-color:crimson"></li>
        <li style="background-color:bisque"></li>
        <li style="background-color:blueviolet"></li>
        <li style="background-color:coral"></li>
        <li style="background-color:chartreuse"></li>
        <li style="background-color:darkolivegreen"></li>
        <li style="background-color:cyan"></li>
        <li style="background-color:#194738"></li>        
    </ul>

    <p class="color-picker"></p>

    <script>
        var list = document.querySelectorAll("li");
        for (var i = i = 0, len = list.length; i < len; i++) {
            list[i].onclick = function(e) {
                var t = e.target;
                var c = t.style.backgroundColor;
                var p = document.getElementsByClassName("color-picker")[0]
                p.innerHTML = c;
                t.style.backgroundColor = p.style.color;
                // p.style.color = c;

            }
        }
    </script>

    <div id="parent" style="background-color: #000;height: 400px; width: 400px" data-id="444">
        <div id="child1" style="background-color: blue;height: 200px; width: 200px" data-id="555"></div>
        <div id="child2" style="background-color: red;height: 200px; width: 200px" data-id="666"></div>
    </div>
    <script>
        document.getElementById('parent').onclick=function () {
            console.log('parent: ' + this.getAttribute('data-id'));
        };
        document.getElementById('child1').onclick=function () {
            console.log('child 1: ' + this.getAttribute('data-id'));
        };
        document.getElementById('child2').onclick=function (e) {
            console.log('child 2: ' + this.getAttribute('data-id'));
            e.stopPropagation();
        };

    </script>

    <section>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>
        <script>
            function fade(btn) {
                btn.setAttribute('disabled', 'disabled');
                let el = document.getElementById('fade-obj');
                let startVisible = el.style.visibility !== 'hidden';
                let alpha = startVisible ? 1 : 0;
                el.style.backgroundColor = `rgba(0, 0, 0, ${alpha})`
                el.style.visibility = 'visible';
                let code = setInterval(function() {
                    let endFlag;
                    if( startVisible ) {
                        alpha -= 0.025;
                        endFlag = alpha < 0; 
                    } else {
                        alpha += 0.025;
                        endFlag = alpha > 1;
                    }
                    if( endFlag ) {
                        btn.innerHTML = startVisible ? '淡入' : '淡出';
                        btn.removeAttribute('disabled')
                        clearInterval(code);
                        el.style.visibility = startVisible ? 'hidden' : 'visible';
                        return;
                    }
                    el.style.backgroundColor = `rgba(0, 0, 0, ${alpha})`
                }, 20);
            }
            document.getElementById('fade-btn').onclick = function(e) {
                fade(e.target)
            }
        </script>
    </section>
</body>
</html>